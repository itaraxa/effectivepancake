# Задание по треку «Сервис сбора метрик и алертинга»
## Инкремент 1
Разработайте сервер для сбора рантайм-метрик, который будет собирать репорты от агентов по протоколу HTTP. Агент вам предстоит реализовать в следующем инкременте — в качестве источника метрик вы будете использовать пакет runtime.
Сервер должен быть доступен по адресу `http://localhost:8080`, а также:

- Принимать и хранить произвольные метрики двух типов:
    - Тип gauge, float64 — новое значение должно замещать предыдущее.
    - Тип counter, int64 — новое значение должно добавляться к предыдущему, если какое-то значение уже было известно серверу.
- Принимать метрики по протоколу HTTP методом POST.
- Принимать данные в формате http://<АДРЕС_СЕРВЕРА>/update/<ТИП_МЕТРИКИ>/<ИМЯ_МЕТРИКИ>/<ЗНАЧЕНИЕ_МЕТРИКИ>, Content-Type: text/plain.
- При успешном приёме возвращать http.StatusOK.
- При попытке передать запрос без имени метрики возвращать http.StatusNotFound.
- При попытке передать запрос с некорректным типом метрики или значением возвращать http.StatusBadRequest.

Редиректы не поддерживаются.
Для хранения метрик объявите тип MemStorage. Рекомендуем использовать тип struct с полем-коллекцией внутри (slice или map). В будущем это позволит добавлять к объекту хранилища новые поля, например логер или мьютекс, чтобы можно было использовать их в методах. Опишите интерфейс для взаимодействия с этим хранилищем.
Пример запроса к серверу:

```
POST /update/counter/someMetric/527 HTTP/1.1
Host: localhost:8080
Content-Length: 0
Content-Type: text/plain
```

Пример ответа от сервера:

```
HTTP/1.1 200 OK
Date: Tue, 21 Feb 2023 02:51:35 GMT
Content-Length: 11
Content-Type: text/plain; charset=utf-8
```

## Инкремент 3
Вы написали приложение с помощью пакета стандартной библиотеки `net/http`. Используя любой внешний пакет (роутер или фреймворк), совместимый с `net/http`, перепишите ваш код:

- Доработайте сервер так, чтобы в ответ на запрос `GET http://<АДРЕС_СЕРВЕРА>/value/<ТИП_МЕТРИКИ>/<ИМЯ_МЕТРИКИ>` он возвращал текущее значение метрики в текстовом виде со статусом `http.StatusOK`.
- При попытке запроса неизвестной метрики сервер должен возвращать `http.StatusNotFound`.
- По запросу `GET http://<АДРЕС_СЕРВЕРА>/` сервер должен отдавать HTML-страницу со списком имён и значений всех известных ему на текущий момент метрик.
- Хендлеры должны взаимодействовать с экземпляром MemStorage при помощи соответствующих интерфейсных методов.

# Инкремент 4
Доработайте код, чтобы он умел принимать аргументы с использованием флагов.
- Аргументы сервера:
  - Флаг `-a=<ЗНАЧЕНИЕ>` отвечает за адрес эндпоинта HTTP-сервера (по умолчанию `localhost:8080`).
- При попытке передать приложению незвестные флаги оно должно завершаться с сообщением о соответствующей ошибке.
- Значения интервалов времени должны задаваться в секундах.
- Во всех случаях должны присутствовать значения по умолчанию.

# Инкремент 5
Доработайте сервер, чтобы он мог изменять свои параметры запуска по умолчанию через переменные окружения:
- `ADDRESS` отвечает за адрес эндпоинта HTTP-сервера.
- Приоритет параметров должен быть таким:
    - Если указана переменная окружения, то используется она.
    - Если нет переменной окружения, но есть аргумент командной строки (флаг), то используется он.
    - Если нет ни переменной окружения, ни флага, то используется значение по умолчанию.

# Инкремент 6
Реализуйте логирование сведений о запросах и ответах на сервере для всех эндпоинтов, которые у вас уже есть. 
- Сведения о запросах должны содержать URI, метод запроса и время, затраченное на его выполнение.
- Сведения об ответах должны содержать код статуса и размер содержимого ответа.
Эту функциональность нужно реализовать через middleware. Используйте один из сторонних пакетов для логирования:
- [zerolog](github.com/rs/zerolog),
- [zap](go.uber.org/zap),
- [logrus](github.com/sirupsen/logrus).

Все сообщения логера должны быть на уровне `Info`.